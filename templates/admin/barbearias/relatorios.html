{% extends "admin/base_site.html" %}
{% load admin_urls static admin_list %}

{% block title %}{{ title }} | {{ site_title|default:"Django site admin" }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">Home</a>
&rsaquo; <a href="{% url 'admin:barbearias_barbearia_changelist' %}">Estabelecimentos</a>
&rsaquo; Relatórios
</div>
{% endblock %}

{% block content %}
<h1>{{ title }}</h1>

<div class="module">
    <h2>Selecione um estabelecimento para gerar relatórios</h2>
    
    <div class="results">
        <table id="result_list">
            <thead>
                <tr>
                    <th scope="col">Estabelecimento</th>
                    <th scope="col">Telefone</th>
                    <th scope="col">Usuário</th>
                    <th scope="col">Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for barbearia in barbearias %}
                <tr class="{% cycle 'row1' 'row2' %}">
                    <td>{{ barbearia.nome }}</td>
                    <td>{{ barbearia.telefone }}</td>
                    <td>{{ barbearia.usuario.username }}</td>
                    <td>
                        <a href="{% url 'admin:barbearias_barbearia_relatorio_mensal' barbearia.id %}" class="viewlink">
                            Ver Relatório Mensal
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4">Nenhum estabelecimento ativo encontrado.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="module">
    <h2>Informações sobre os Relatórios</h2>
    <p>
        Os relatórios mensais incluem:
    </p>
    <ul>
        <li>Número total de agendamentos</li>
        <li>Agendamentos por status (agendado, confirmado, cancelado, concluído)</li>
        <li>Faturamento total do mês</li>
        <li>Serviços mais populares</li>
        <li>Profissionais mais procurados</li>
        <li>Distribuição de agendamentos por dia do mês</li>
        <li>Opção de exportar dados em CSV</li>
    </ul>
</div>

{% endblock %}
